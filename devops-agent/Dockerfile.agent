FROM python:3.11-slim

WORKDIR /app

RUN pip install --no-cache-dir requests psycopg2-binary pgvector httpx

# install local SDK
COPY deploy/repos/talos-sdk-py /tmp/talos-sdk-py
RUN pip install /tmp/talos-sdk-py

COPY deploy/repos/talos-examples/devops-agent/src/ /app/src/

ENV PYTHONPATH=/app

CMD ["python", "-m", "src.agent", "--mode", "interactive"]
